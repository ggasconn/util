#!/bin/bash

#zfs.destroy.all.snapshots

if [ $# -lt 1 -o $# -gt 2 ]
then
  printf "\n\nUsage:\n\t$0 src-dataset [-r]\n\n\n"
  exit 1
fi

echo zfs list -t snapshot -H -o name -S creation -d 1 "${1}" "${2}" \| xargs --no-run-if-empty -n 1 zfs destroy 
zfs list -t snapshot -H -o name -S creation -d 1  "${1}" "${2}" | xargs --no-run-if-empty -n 1 zfs destroy 
