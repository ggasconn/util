#!/bin/bash

if [ $# -lt 2 -o $# -gt 3 ]
then
  printf "\n\nError:\n\t$0 username database [ host ]\n\nPurpose: convert existing mysql database to InnoDB engine\n\n"
  exit 1
fi

printf 'Password:'
read -s PASS
echo

HOST=${3:-localhost}
USER=$1
DATABASE=$2

echo 'SHOW TABLES;'  | mysql -u $USER --password=$PASS -D $DATABASE  | awk '!/^Tables_in_/ {print "ALTER TABLE `"$0"` ENGINE = InnoDB;"}'  | column -t | mysql -u $USER --password=$PASS -D $DATABASE
